package ncg.chimpsahoy.everdark;
import java.io.*;
import java.util.Scanner;

public class Player extends Entity {

	private static final int MAX_HP = 100;

	public Player(String name, int maxHp, int hp, int str, int endur, int dex, int swift, int iq, int wil, int charm, int intim, int perc, char appearMod, int id) {
		super(name, maxHp, hp, str, endur, dex, swift, iq, wil, charm, intim, perc, appearMod, id);
	}

	public static Player loadFromFile(String path) throws FileNotFoundException, IOException, ClassNotFoundException {
		
		FileInputStream fis = new FileInputStream(path);
		ObjectInputStream ois = new ObjectInputStream(fis);
		Player loaded = (Player)(ois.readObject());
		ois.close();
		fis.close();
		return loaded;

	}

	public void saveToFile() throws FileNotFoundException, IOException {

		String fileName = super.getName() + ".ed";
		FileOutputStream fos = new FileOutputStream(fileName);
		ObjectOutputStream oos = new ObjectOutputStream(fos);
		oos.writeObject(this);
		oos.close();
		fos.close();	

	}

	public static Player characterCreation() {
		Scanner in = new Scanner(System.in);
		int availablePoints = 100;
		System.out.println("Welcome to EverDark. The Character Creation Process will begin now. Please refer to any available manuals and documentation to aid you during this process. " +
				"You can't go back! So, make sure you know where you're putting your points before you begin.");
		String inName = "";
		int inStr = 0;
		int inEndur = 0;
		int inDex = 0;
		int inSwift = 0;
		int inIq = 0;
		int inWil = 0;
		int inCharm = 0;
		int inIntim = 0;
		int inPerc= 0;
		char inAppearance = 'c';
		boolean finished = false;
		
		System.out.print("Please name your character: ");
		inName = in.nextLine();

		while (!finished) {
			System.out.print("\nHow many points would you like to put into Strength? (" + availablePoints + " available): ");
			try {
				inStr = in.nextInt();
				if (finished = (inStr <= availablePoints)) {
					availablePoints -= inStr;
				} else {
					System.out.println("\nYou don't have enough points for that!")
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Endurance? (" + availablePoints + " available): ");
			try {
				inEndur = in.nextInt();
				if (finished = (inEndur > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inEndur;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}		
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Dexterity? (" + availablePoints + " available): ");
			try {
				inDex = in.nextInt();
				if (finished = (inDex > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inDex;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Swiftness? (" + availablePoints + " available): ");
			try {
				inSwift = in.nextInt();
				if (finished = (inSwift > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inSwift;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Intelligence? (" + availablePoints + " available): ");
			try {
				inIq = in.nextInt();
				if (finished = (inIq > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inIq;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Willpower? (" + availablePoints + " available): ");
			try {
				inWil = in.nextInt();
				if (finished = (inWil > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inWil;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Charisma? (" + availablePoints + " available): ");
			try {
				inCharm = in.nextInt();
				if (finished = (inCharm > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inCharm;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Intimidation? (" + availablePoints + " available): ");
			try {
				inIntim = in.nextInt();
				if (finished = (inIntim > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inIntim;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}
		finished = false;
		while (!finished) {
			System.out.print("\nHow many points would you like to put into Perception? (" + availablePoints + " available): ");
			try {
				inPerc = in.nextInt();
				if (finished = (inPerc > availablePoints)) {
					System.out.println("\nYou don't have enough points for that!");
				} else {
				availablePoints -= inPerc;
				}
			} catch (Exception e) {
				System.out.println("\nPlease make sure your input is an integer.");
			}
		}	
		finished = false;
		while (!finished) {
			System.out.print("\nFinally, what letter would you like to represent you? Please choose a letter from the standard ASCII Latin alphabet. Case does not matter.");
			inAppearance = in.next().charAt(0);
			if (finished = Character.toUpperCase(inAppearance) < 'A' || Character.toUpperCase(inAppearance) > 'Z') {
				System.out.println("\nThat is not a valid character.");
			}
		}
		return new Player(inName, MAX_HP, MAX_HP, inStr, inEndur, inDex, inSwift, inIq, inWil, inCharm, inIntim, inPerc, inAppearance, 0);
	}



}
